{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///C:/projets/frontend/contexts/AuthContext.tsx"],"sourcesContent":["// contexts/AuthContext.tsx - VERSION AVEC TOUTES LES PROPRIÉTÉS\n'use client'\n\nimport { createContext, useContext, useState, useEffect, ReactNode } from 'react'\n\ninterface AuthContextType {\n  user: any\n  member: any\n  isLoading: boolean\n  isAuthenticated: boolean\n  isAdmin: boolean\n  isWebmaster: boolean\n  login: (username: string, password: string) => Promise<boolean>\n  logout: () => void\n}\n\nconst AuthContext = createContext<AuthContextType | undefined>(undefined)\n\nexport function useAuth() {\n  const context = useContext(AuthContext)\n  if (context === undefined) {\n    throw new Error('useAuth must be used within an AuthProvider')\n  }\n  return context\n}\n\nexport function AuthProvider({ children }: { children: ReactNode }) {\n  const [user, setUser] = useState<any>(null)\n  const [member, setMember] = useState<any>(null)\n  const [isLoading, setIsLoading] = useState(false)\n  const [isAuthenticated, setIsAuthenticated] = useState(false)\n\n  // Vérifier l'authentification au chargement\n  useEffect(() => {\n    const token = localStorage.getItem('access_token')\n    const userData = localStorage.getItem('user')\n    const memberData = localStorage.getItem('member')\n    \n    if (token && userData) {\n      try {\n        setUser(JSON.parse(userData))\n        if (memberData) {\n          setMember(JSON.parse(memberData))\n        }\n        setIsAuthenticated(true)\n      } catch (error) {\n        console.error('Error parsing auth data:', error)\n        // Nettoyer en cas d'erreur\n        localStorage.removeItem('access_token')\n        localStorage.removeItem('user')\n        localStorage.removeItem('member')\n        setIsAuthenticated(false)\n      }\n    }\n  }, [])\n\n  const login = async (username: string, password: string): Promise<boolean> => {\n    setIsLoading(true)\n    try {\n      const response = await fetch('http://localhost:8000/api/auth/login/', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ username, password }),\n      })\n\n      if (response.ok) {\n        const data = await response.json()\n        \n        // Stocker les données\n        localStorage.setItem('access_token', data.access)\n        localStorage.setItem('user', JSON.stringify(data.user))\n        if (data.member) {\n          localStorage.setItem('member', JSON.stringify(data.member))\n          setMember(data.member)\n        }\n        \n        setUser(data.user)\n        setIsAuthenticated(true)\n        return true\n      }\n      return false\n    } catch (error) {\n      console.error('Login error:', error)\n      return false\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  const logout = () => {\n    localStorage.removeItem('access_token')\n    localStorage.removeItem('user')\n    localStorage.removeItem('member')\n    setUser(null)\n    setMember(null)\n    setIsAuthenticated(false)\n    window.location.href = '/'\n  }\n\n  // Calcul des propriétés dérivées\n  const isAdmin = member?.role === 'ADMIN' || member?.role === 'WEBMASTER'\n  const isWebmaster = member?.role === 'WEBMASTER'\n\n  return (\n    <AuthContext.Provider value={{\n      user,\n      member,\n      isLoading,\n      isAuthenticated,\n      isAdmin,\n      isWebmaster,\n      login,\n      logout,\n    }}>\n      {children}\n    </AuthContext.Provider>\n  )\n}"],"names":[],"mappings":"AAAA,gEAAgE;;;;;;;;AAGhE;AAFA;;;AAeA,MAAM,4BAAc,IAAA,sNAAa,EAA8B;AAExD,SAAS;IACd,MAAM,UAAU,IAAA,mNAAU,EAAC;IAC3B,IAAI,YAAY,WAAW;QACzB,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT;AAEO,SAAS,aAAa,EAAE,QAAQ,EAA2B;IAChE,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAM;IACtC,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAM;IAC1C,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC;IAC3C,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,iNAAQ,EAAC;IAEvD,4CAA4C;IAC5C,IAAA,kNAAS,EAAC;QACR,MAAM,QAAQ,aAAa,OAAO,CAAC;QACnC,MAAM,WAAW,aAAa,OAAO,CAAC;QACtC,MAAM,aAAa,aAAa,OAAO,CAAC;QAExC,IAAI,SAAS,UAAU;YACrB,IAAI;gBACF,QAAQ,KAAK,KAAK,CAAC;gBACnB,IAAI,YAAY;oBACd,UAAU,KAAK,KAAK,CAAC;gBACvB;gBACA,mBAAmB;YACrB,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,4BAA4B;gBAC1C,2BAA2B;gBAC3B,aAAa,UAAU,CAAC;gBACxB,aAAa,UAAU,CAAC;gBACxB,aAAa,UAAU,CAAC;gBACxB,mBAAmB;YACrB;QACF;IACF,GAAG,EAAE;IAEL,MAAM,QAAQ,OAAO,UAAkB;QACrC,aAAa;QACb,IAAI;YACF,MAAM,WAAW,MAAM,MAAM,yCAAyC;gBACpE,QAAQ;gBACR,SAAS;oBACP,gBAAgB;gBAClB;gBACA,MAAM,KAAK,SAAS,CAAC;oBAAE;oBAAU;gBAAS;YAC5C;YAEA,IAAI,SAAS,EAAE,EAAE;gBACf,MAAM,OAAO,MAAM,SAAS,IAAI;gBAEhC,sBAAsB;gBACtB,aAAa,OAAO,CAAC,gBAAgB,KAAK,MAAM;gBAChD,aAAa,OAAO,CAAC,QAAQ,KAAK,SAAS,CAAC,KAAK,IAAI;gBACrD,IAAI,KAAK,MAAM,EAAE;oBACf,aAAa,OAAO,CAAC,UAAU,KAAK,SAAS,CAAC,KAAK,MAAM;oBACzD,UAAU,KAAK,MAAM;gBACvB;gBAEA,QAAQ,KAAK,IAAI;gBACjB,mBAAmB;gBACnB,OAAO;YACT;YACA,OAAO;QACT,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,gBAAgB;YAC9B,OAAO;QACT,SAAU;YACR,aAAa;QACf;IACF;IAEA,MAAM,SAAS;QACb,aAAa,UAAU,CAAC;QACxB,aAAa,UAAU,CAAC;QACxB,aAAa,UAAU,CAAC;QACxB,QAAQ;QACR,UAAU;QACV,mBAAmB;QACnB,OAAO,QAAQ,CAAC,IAAI,GAAG;IACzB;IAEA,iCAAiC;IACjC,MAAM,UAAU,QAAQ,SAAS,WAAW,QAAQ,SAAS;IAC7D,MAAM,cAAc,QAAQ,SAAS;IAErC,qBACE,8OAAC,YAAY,QAAQ;QAAC,OAAO;YAC3B;YACA;YACA;YACA;YACA;YACA;YACA;YACA;QACF;kBACG;;;;;;AAGP"}},
    {"offset": {"line": 125, "column": 0}, "map": {"version":3,"sources":["file:///C:/projets/frontend/node_modules/next/src/server/route-modules/app-page/module.compiled.js"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n"],"names":["process","env","NEXT_RUNTIME","module","exports","require","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK"],"mappings":"AAAA,IAAIA,QAAQC,GAAG,CAACC,YAAY,KAAK,QAAQ;;KAElC;IACL,IAAIF,QAAQC,GAAG,CAACK,yBAAyB,EAAE;;SAcpC;QACL,IAAIN,QAAQC,GAAG,CAACM,QAAQ,KAAK,WAAe;YAC1C,IAAIP,QAAQC,GAAG,CAACO,SAAS,eAAE;gBACzBL,OAAOC,OAAO,GAAGC,QAAQ;YAC3B,OAAO;;QAGT,OAAO;;IAOT;AACF","ignoreList":[0]}},
    {"offset": {"line": 144, "column": 0}, "map": {"version":3,"sources":["file:///C:/projets/frontend/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxDevRuntime\n"],"names":["module","exports","require","vendored","ReactJsxDevRuntime"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,4HACRC,QAAQ,CAAC,YAAY,CAAEC,kBAAkB","ignoreList":[0]}},
    {"offset": {"line": 149, "column": 0}, "map": {"version":3,"sources":["file:///C:/projets/frontend/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n"],"names":["module","exports","require","vendored","React"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,4HACRC,QAAQ,CAAC,YAAY,CAAEC,KAAK","ignoreList":[0]}}]
}